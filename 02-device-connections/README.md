# บทที่ 2: การเชื่อมต่ออุปกรณ์

บทนี้ครอบคลุมวิธีการเชื่อมต่ออุปกรณ์ IoT กับ MQTT broker และการจัดการการส่งข้อมูล

## วัตถุประสงค์การเรียนรู้

- กำหนดค่าอุปกรณ์ IoT เพื่อเชื่อมต่อกับ MQTT Broker
- ใช้งานการส่งข้อมูลเซ็นเซอร์ผ่าน MQTT
- ทดสอบการเชื่อมต่อ WebSocket กับ MQTT Broker
- ส่งและรับข้อมูลผ่านไคลเอนต์ WebSocket
- จัดการลำดับชั้นของ Topic สำหรับอุปกรณ์ IoT หลายตัว
- กำหนดค่า Retained Message และ Will Message
- ตรวจสอบการเชื่อมต่อและดีบักการสื่อสาร
- แก้ไขปัญหาการเชื่อมต่อที่พบบ่อย
- ทำเวิร์คช็อปกับเซ็นเซอร์ IoT จริง

## หัวข้อที่ครอบคลุม

1. การกำหนดค่าอุปกรณ์เพื่อเชื่อมต่อกับ MQTT Broker
2. การส่งข้อมูลเซ็นเซอร์ (อุณหภูมิ, ความชื้น) ผ่าน MQTT
3. การทดสอบการเชื่อมต่อ WebSocket กับ MQTT Broker
4. การส่งและรับข้อมูลผ่านไคลเอนต์ WebSocket (เบราว์เซอร์/แอปพลิเคชันมือถือ)
5. การจัดการลำดับชั้นของ Topic สำหรับอุปกรณ์ IoT หลายตัว
6. การตั้งค่า Retained Message และ Will Message
7. การตรวจสอบการเชื่อมต่อและบันทึกการดีบัก
8. การแก้ไขปัญหาข้อผิดพลาดในการเชื่อมต่อ WebSocket และความขัดแย้งของ QoS
9. เวิร์คช็อป: การเชื่อมต่อเซ็นเซอร์ IoT จริงกับ MQTT/WebSocket

## ทรัพยากร

- บอร์ดพัฒนา IoT (ESP8266, ESP32, Arduino)
- เซ็นเซอร์ (อุณหภูมิ, ความชื้น ฯลฯ)
- ไลบรารีไคลเอนต์ WebSocket
- ไลบรารีไคลเอนต์ MQTT สำหรับไมโครคอนโทรลเลอร์
